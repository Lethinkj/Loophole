services:
  # Run immediately on service startup
  - type: web
    name: auto-commit-startup
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: bash startup.sh
    healthCheckPath: /
    envVars:
      - key: GITHUB_TOKEN
        value: ${{ secrets.GITHUB_TOKEN }}

  # Scheduled jobs (4 times daily)
  - type: cron
    name: auto-commit-midnight
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python auto-commit.py
    schedule: "0 0 * * *"  # 12 AM UTC
    envVars:
      - key: GITHUB_TOKEN
        value: ${{ secrets.GITHUB_TOKEN }}

  - type: cron
    name: auto-commit-9am
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python auto-commit.py
    schedule: "0 9 * * *"  # 9 AM UTC
    envVars:
      - key: GITHUB_TOKEN
        value: ${{ secrets.GITHUB_TOKEN }}

  - type: cron
    name: auto-commit-noon
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python auto-commit.py
    schedule: "0 12 * * *"  # 12 PM UTC
    envVars:
      - key: GITHUB_TOKEN
        value: ${{ secrets.GITHUB_TOKEN }}

  - type: cron
    name: auto-commit-9pm
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python auto-commit.py
    schedule: "0 21 * * *"  # 9 PM UTC
    envVars:
      - key: GITHUB_TOKEN
        value: ${{ secrets.GITHUB_TOKEN }}
